"use strict";
var d = Object.create;
var k = Object.defineProperty;
var l = Object.getOwnPropertyDescriptor;
var p = Object.getOwnPropertyNames;
var v = Object.getPrototypeOf, u = Object.prototype.hasOwnProperty;
var m = (o, e, r, t) => {
  if (e && typeof e == "object" || typeof e == "function")
    for (let b of p(e))
      !u.call(o, b) && b !== r && k(o, b, { get: () => e[b], enumerable: !(t = l(e, b)) || t.enumerable });
  return o;
};
var y = (o, e, r) => (r = o != null ? d(v(o)) : {}, m(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  e || !o || !o.__esModule ? k(r, "default", { value: o, enumerable: !0 }) : r,
  o
));

// src/bin/index.ts
var a = require("node:child_process"), n = require("node:fs"), c = require("node:path");

// src/common/versions.ts
var i = {
  "@storybook/addon-a11y": "9.0.0-rc.4",
  "@storybook/addon-actions": "9.0.0-rc.4",
  "@storybook/addon-backgrounds": "9.0.0-rc.4",
  "@storybook/addon-controls": "9.0.0-rc.4",
  "@storybook/addon-docs": "9.0.0-rc.4",
  "@storybook/addon-jest": "9.0.0-rc.4",
  "@storybook/addon-links": "9.0.0-rc.4",
  "@storybook/addon-measure": "9.0.0-rc.4",
  "@storybook/addon-onboarding": "9.0.0-rc.4",
  "@storybook/addon-outline": "9.0.0-rc.4",
  "storybook-addon-pseudo-states": "9.0.0-rc.4",
  "@storybook/addon-themes": "9.0.0-rc.4",
  "@storybook/addon-toolbars": "9.0.0-rc.4",
  "@storybook/addon-viewport": "9.0.0-rc.4",
  "@storybook/addon-vitest": "9.0.0-rc.4",
  "@storybook/builder-vite": "9.0.0-rc.4",
  "@storybook/builder-webpack5": "9.0.0-rc.4",
  storybook: "9.0.0-rc.4",
  "@storybook/angular": "9.0.0-rc.4",
  "@storybook/ember": "9.0.0-rc.4",
  "@storybook/html-vite": "9.0.0-rc.4",
  "@storybook/nextjs": "9.0.0-rc.4",
  "@storybook/nextjs-vite": "9.0.0-rc.4",
  "@storybook/preact-vite": "9.0.0-rc.4",
  "@storybook/react-native-web-vite": "9.0.0-rc.4",
  "@storybook/react-vite": "9.0.0-rc.4",
  "@storybook/react-webpack5": "9.0.0-rc.4",
  "@storybook/server-webpack5": "9.0.0-rc.4",
  "@storybook/svelte-vite": "9.0.0-rc.4",
  "@storybook/sveltekit": "9.0.0-rc.4",
  "@storybook/vue3-vite": "9.0.0-rc.4",
  "@storybook/web-components-vite": "9.0.0-rc.4",
  sb: "9.0.0-rc.4",
  "@storybook/cli": "9.0.0-rc.4",
  "@storybook/codemod": "9.0.0-rc.4",
  "@storybook/core-webpack": "9.0.0-rc.4",
  "create-storybook": "9.0.0-rc.4",
  "@storybook/csf-plugin": "9.0.0-rc.4",
  "eslint-plugin-storybook": "9.0.0-rc.4",
  "@storybook/react-dom-shim": "9.0.0-rc.4",
  "@storybook/preset-create-react-app": "9.0.0-rc.4",
  "@storybook/preset-react-webpack": "9.0.0-rc.4",
  "@storybook/preset-server-webpack": "9.0.0-rc.4",
  "@storybook/html": "9.0.0-rc.4",
  "@storybook/preact": "9.0.0-rc.4",
  "@storybook/react": "9.0.0-rc.4",
  "@storybook/server": "9.0.0-rc.4",
  "@storybook/svelte": "9.0.0-rc.4",
  "@storybook/vue3": "9.0.0-rc.4",
  "@storybook/web-components": "9.0.0-rc.4"
};

// src/bin/index.ts
var s = process.argv.slice(2);
if (["dev", "build", "index"].includes(s[0]))
  require("storybook/internal/cli/bin");
else {
  let o;
  if (s[0] === "init") {
    let r;
    try {
      r = require.resolve("create-storybook/package.json");
    } catch {
    }
    r ? JSON.parse((0, n.readFileSync)(r, "utf-8")).version === i["create-storybook"] && (o = [
      "node",
      (0, c.join)((0, c.dirname)(r), "bin", "index.cjs"),
      ...s.slice(1)
    ]) : o = ["npx", "--yes", `create-storybook@${i.storybook}`, ...s.slice(1)];
  } else {
    let r;
    try {
      r = require.resolve("@storybook/cli/package.json");
    } catch {
    }
    r ? JSON.parse((0, n.readFileSync)(r, "utf-8")).version === i["@storybook/cli"] && (o = ["node", (0, c.join)((0, c.dirname)(r), "bin", "\
index.cjs"), ...s]) : o = ["npx", "--yes", `@storybook/cli@${i.storybook}`, ...s];
  }
  o || (console.error("Could not run storybook cli, please report this as a bug"), process.exit(1)), (0, a.spawn)(o[0], o.slice(1), { stdio: "\
inherit", shell: !0 }).on("exit", (r) => {
    r != null && process.exit(r), process.exit(1);
  });
}
