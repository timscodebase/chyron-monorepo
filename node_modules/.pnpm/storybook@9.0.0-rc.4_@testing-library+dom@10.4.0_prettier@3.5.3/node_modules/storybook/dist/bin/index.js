import ESM_COMPAT_Module from "node:module";
import { fileURLToPath as ESM_COMPAT_fileURLToPath } from 'node:url';
import { dirname as ESM_COMPAT_dirname } from 'node:path';
const __filename = ESM_COMPAT_fileURLToPath(import.meta.url);
const __dirname = ESM_COMPAT_dirname(__filename);
const require = ESM_COMPAT_Module.createRequire(import.meta.url);
var s = /* @__PURE__ */ ((r) => typeof require < "u" ? require : typeof Proxy < "u" ? new Proxy(r, {
  get: (b, o) => (typeof require < "u" ? require : b)[o]
}) : r)(function(r) {
  if (typeof require < "u") return require.apply(this, arguments);
  throw Error('Dynamic require of "' + r + '" is not supported');
});

// src/bin/index.ts
import { spawn as y } from "node:child_process";
import { readFileSync as i } from "node:fs";
import { dirname as k, join as n } from "node:path";

// src/common/versions.ts
var t = {
  "@storybook/addon-a11y": "9.0.0-rc.4",
  "@storybook/addon-actions": "9.0.0-rc.4",
  "@storybook/addon-backgrounds": "9.0.0-rc.4",
  "@storybook/addon-controls": "9.0.0-rc.4",
  "@storybook/addon-docs": "9.0.0-rc.4",
  "@storybook/addon-jest": "9.0.0-rc.4",
  "@storybook/addon-links": "9.0.0-rc.4",
  "@storybook/addon-measure": "9.0.0-rc.4",
  "@storybook/addon-onboarding": "9.0.0-rc.4",
  "@storybook/addon-outline": "9.0.0-rc.4",
  "storybook-addon-pseudo-states": "9.0.0-rc.4",
  "@storybook/addon-themes": "9.0.0-rc.4",
  "@storybook/addon-toolbars": "9.0.0-rc.4",
  "@storybook/addon-viewport": "9.0.0-rc.4",
  "@storybook/addon-vitest": "9.0.0-rc.4",
  "@storybook/builder-vite": "9.0.0-rc.4",
  "@storybook/builder-webpack5": "9.0.0-rc.4",
  storybook: "9.0.0-rc.4",
  "@storybook/angular": "9.0.0-rc.4",
  "@storybook/ember": "9.0.0-rc.4",
  "@storybook/html-vite": "9.0.0-rc.4",
  "@storybook/nextjs": "9.0.0-rc.4",
  "@storybook/nextjs-vite": "9.0.0-rc.4",
  "@storybook/preact-vite": "9.0.0-rc.4",
  "@storybook/react-native-web-vite": "9.0.0-rc.4",
  "@storybook/react-vite": "9.0.0-rc.4",
  "@storybook/react-webpack5": "9.0.0-rc.4",
  "@storybook/server-webpack5": "9.0.0-rc.4",
  "@storybook/svelte-vite": "9.0.0-rc.4",
  "@storybook/sveltekit": "9.0.0-rc.4",
  "@storybook/vue3-vite": "9.0.0-rc.4",
  "@storybook/web-components-vite": "9.0.0-rc.4",
  sb: "9.0.0-rc.4",
  "@storybook/cli": "9.0.0-rc.4",
  "@storybook/codemod": "9.0.0-rc.4",
  "@storybook/core-webpack": "9.0.0-rc.4",
  "create-storybook": "9.0.0-rc.4",
  "@storybook/csf-plugin": "9.0.0-rc.4",
  "eslint-plugin-storybook": "9.0.0-rc.4",
  "@storybook/react-dom-shim": "9.0.0-rc.4",
  "@storybook/preset-create-react-app": "9.0.0-rc.4",
  "@storybook/preset-react-webpack": "9.0.0-rc.4",
  "@storybook/preset-server-webpack": "9.0.0-rc.4",
  "@storybook/html": "9.0.0-rc.4",
  "@storybook/preact": "9.0.0-rc.4",
  "@storybook/react": "9.0.0-rc.4",
  "@storybook/server": "9.0.0-rc.4",
  "@storybook/svelte": "9.0.0-rc.4",
  "@storybook/vue3": "9.0.0-rc.4",
  "@storybook/web-components": "9.0.0-rc.4"
};

// src/bin/index.ts
var e = process.argv.slice(2);
if (["dev", "build", "index"].includes(e[0]))
  s("storybook/internal/cli/bin");
else {
  let r;
  if (e[0] === "init") {
    let o;
    try {
      o = s.resolve("create-storybook/package.json");
    } catch {
    }
    o ? JSON.parse(i(o, "utf-8")).version === t["create-storybook"] && (r = [
      "node",
      n(k(o), "bin", "index.cjs"),
      ...e.slice(1)
    ]) : r = ["npx", "--yes", `create-storybook@${t.storybook}`, ...e.slice(1)];
  } else {
    let o;
    try {
      o = s.resolve("@storybook/cli/package.json");
    } catch {
    }
    o ? JSON.parse(i(o, "utf-8")).version === t["@storybook/cli"] && (r = ["node", n(k(o), "bin", "index.cjs"), ...e]) : r = ["npx", "--yes",
    `@storybook/cli@${t.storybook}`, ...e];
  }
  r || (console.error("Could not run storybook cli, please report this as a bug"), process.exit(1)), y(r[0], r.slice(1), { stdio: "inherit",
  shell: !0 }).on("exit", (o) => {
    o != null && process.exit(o), process.exit(1);
  });
}
